\documentclass[12pt,a4paper]{article}

% ---------------------------------------------------------
% Packages
% ---------------------------------------------------------
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{amsmath, amssymb}
\usepackage{parskip}
\usepackage{array}
\usepackage[table]{xcolor}
\usepackage{hyperref}
\usepackage{colortbl}

% ---------------------------------------------------------
% Page layout
% ---------------------------------------------------------
\geometry{
	top=2.5cm,
	bottom=2.5cm,
	left=2.3cm,
	right=2.3cm
}

\setlength{\parskip}{0.7em}
\setlength{\parindent}{0pt}
\setlength{\headheight}{62pt}  
\addtolength{\topmargin}{-30pt}

% Increase headheight to fit logos + bar
\setlength{\headheight}{60pt}

% ---------------------------------------------------------
% Colors
% ---------------------------------------------------------
\definecolor{headerblue}{RGB}{0,90,170}
\definecolor{headergray}{gray}{0.9}

% ---------------------------------------------------------
% fancyhdr rules
% ---------------------------------------------------------
% Remove default header rule (this was the line under the blue bar)
\renewcommand{\headrulewidth}{0pt}
% We'll draw the footer rule manually
\renewcommand{\footrulewidth}{0pt}

% ---------------------------------------------------------
% User-editable contest info
% ---------------------------------------------------------
\newcommand{\ContestSeriesName}{Programming Contest League}
\newcommand{\ContestTitle}{Sample University Programming League 2025}

% ---------------------------------------------------------
% Full-width blue bar (touching page edges)
% ---------------------------------------------------------
\newcommand{\FullWidthColorBar}{%
	\noindent
	\hspace*{-\oddsidemargin}%
	\hspace*{-1in}%
	\colorbox{headerblue}{%
		\parbox[c][1.3em][c]{\paperwidth}{%
			\centering\bfseries\color{white}\small \ContestTitle
		}%
	}%
}

% ---------------------------------------------------------
% Header layout
% ---------------------------------------------------------
\newcommand{\ContestHeader}{%
	\begin{minipage}{\textwidth}
		\centering %ICPC|text|uni|Sci|Cul
		\begin{tabular}{@{} m{0.10\textwidth} m{0.45\textwidth} m{0.15\textwidth} m{0.15\textwidth} m{0.15\textwidth} @{}}
			\centering\includegraphics[height=1.6cm]{logo/icpc-logo} &
			\centering\small\bfseries \ContestSeriesName &
			\centering\hspace*{-1cm}\includegraphics[height=1.6cm]{logo/university-logo} &
			\centering\hspace*{-1.5cm}\includegraphics[height=1.6cm]{logo/scientific-logo} &
			\centering\hspace*{-1cm}\includegraphics[height=1.6cm]{logo/cultural-logo}
		\end{tabular}
		
	\end{minipage}
	
	\vspace{0.3em}
	
	\FullWidthColorBar
}

% ---------------------------------------------------------
% Problem footer variables
% ---------------------------------------------------------
\newcounter{probstartpage}
\newcommand{\currentproblemlabel}{}
\newcommand{\currentproblemname}{}
\newcommand{\currentproblemtotalpages}{}

% ---------------------------------------------------------
% Fancy page styles
% ---------------------------------------------------------
\pagestyle{fancy}

% Main style for problem pages
\fancypagestyle{problemstyle}{%
	\fancyhf{}
	\fancyhead[C]{\ContestHeader}
	\fancyfoot[L]{%
		\rule{\textwidth}{0.4pt}\\[-0.3em]
		\small
		Problem \currentproblemlabel\ -- Page
		\number\numexpr\value{page}-\value{probstartpage}+1\relax\ of \currentproblemtotalpages%
	}%
}

% First page (cover): header only, empty footer
\fancypagestyle{firstpage}{%
	\fancyhf{}
	\fancyhead[C]{\ContestHeader}
}

\pagestyle{problemstyle}

% ---------------------------------------------------------
% Problem environment
%   Usage: \begin{problem}{A}{Micromasters}{1} ... \end{problem}
%   3rd arg = total number of pages of this problem
% ---------------------------------------------------------
\newenvironment{problem}[3]{%
	\clearpage
	\gdef\currentproblemlabel{#1}%
	\gdef\currentproblemname{#2}%
	\gdef\currentproblemtotalpages{#3}%
	\setcounter{probstartpage}{\value{page}}%
	\section*{Problem \currentproblemlabel\ : \currentproblemname}
}{%
	% nothing
}

% ---------------------------------------------------------
% Example table command
% ---------------------------------------------------------
\newcommand{\sampleio}[2]{%
	\begin{center}
		\renewcommand{\arraystretch}{1.2}%
		\begin{tabular}{|p{0.47\textwidth}|p{0.47\textwidth}|}
			\hline
			\rowcolor{headergray}
			\centering\textbf{Standard Input} &
			\centering\textbf{Standard Output} \tabularnewline
			\hline
			{\ttfamily\raggedright #1} &
			{\ttfamily\raggedright #2} \tabularnewline
			\hline
		\end{tabular}
	\end{center}
}

% =========================================================
% Document starts
% =========================================================
\begin{document}
	
	% =========================================================
	% First page (cover)
	% =========================================================
	
	% If you want to remove first page (title page) you can comment this line below:
	\input{first-page.tex}
	
	% =========================================================
	% Problems
	% =========================================================
	\pagestyle{problemstyle}
	
	% ---------------------------------------------------------
	% Sample Problem A
	% ---------------------------------------------------------
	\input{./problems/A.tex}
	
	% ---------------------------------------------------------
	% Sample Problem B (2 pages)
	% ---------------------------------------------------------
	\input{./problems/B.tex}
	
\end{document}
